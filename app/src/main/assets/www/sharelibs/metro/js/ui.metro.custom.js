define(["jquery","metro"],function(t,n){return{myDialog:{html:'<div data-role="dialog" class="padding20 mydialog" data-close-button="true" data-overlay="true"><h1>提示</h1><br/><p>Message</p></div>',init:function(t){var n=this.html;return"string"==typeof t?"function"==typeof this._initDOM[t]?this._initDOM[t].apply(this,[n]):alert("Dialog 参数调用错误！"):"object"==typeof t?alert("Dialog 参数调用错误！"):"number"==typeof t&&alert("Dialog 参数调用错误！"),this},initAll:function(){var t=this.html;for(var n in this._initDOM)this._initDOM[n].apply(this,[t])},_initDOM:{loading:function(n){var i=t(n);i.attr("id","loading-dialog").addClass("loading").attr("data-overlay-color","op-gray").removeAttr("data-close-button"),i.find("h1, br").remove(),i.find("p").html('<div class="loading-img"></div><div class="print-img"></div>&nbsp;&nbsp;<span></span>'),t("body").append(i)},alert:function(n){var i=t(n);i.attr("id","alert-dialog").attr("data-type","alert"),t("body").append(i)},success:function(n){var i=t(n);i.attr("id","success-dialog").attr("data-type","success"),t("body").append(i)},warning:function(n){var i=t(n);i.attr("id","warning-dialog").attr("data-type","warning"),t("body").append(i)},info:function(n){var i=t(n);i.attr("id","info-dialog").attr("data-type","info"),t("body").append(i)},toast:function(n){var i=t(n);i.attr("id","toast-dialog").addClass("toast").attr("data-hide","2000").removeAttr("data-close-button"),i.find("h1, br").remove(),t("body").append(i)},confirm:function(n){var i=t(n);i.attr("id","confirm-dialog").removeAttr("data-close-button");var a=t('<button class="confirm-btn button primary sBtn">确定</button>'),o=t('<button class="cancel-btn button danger sBtn">取消</button>'),r=t('<div class="button-box"></div>');r.append(a).append("&nbsp;").append(o),i.append("</br>").append(r),t("body").append(i)}},showDialog:function(n,i,a,o,r){var l=t("#"+n);if(0==l.length)return alert("请先init对话框！"),!1;var d=l.data("dialog");return null!=i&&l.find("p").html(i),null!=a&&l.find("h1").html(a),null!=o&&"function"==typeof o&&l.find(".confirm-btn").off("click").click(function(){d.close(),o()}),null!=r&&"function"==typeof r&&l.find(".cancel-btn").off("click").click(function(){d.close(),r()}),d.element.data("opened")?d.close():d.open(),d},loading:function(n,i){var a=null==n?"加载中...":n,o=t("#loading-dialog").data("dialog");return"printing"==i?t("#loading-dialog").find("p").html('<div class="print-img"></div>&nbsp;&nbsp;<span></span>'):t("#loading-dialog").find("p").html('<div class="loading-img"></div>&nbsp;&nbsp;<span></span>'),t("#loading-dialog p span").text(a),o.open(),o},alert:function(t){return this.showDialog("alert-dialog",t)},confirm:function(t,n,i,a,o){var r=this;return null==a?r.showDialog("confirm-dialog",t,o,n,i):void window.setTimeout(function(){return r.showDialog("confirm-dialog",t,o,n,i)},a)},success:function(t){return this.showDialog("success-dialog",t,"成功")},info:function(t){return this.showDialog("info-dialog",t,"温馨提示")},warning:function(t){return this.showDialog("warning-dialog",t,"请确认")},toast:function(t){return this.showDialog("toast-dialog",t)}},myValidator:{init:function(t,n){t.validator?t.validator({onSubmit:function(t){return!1},onBeforeSubmit:function(t,i){return 0==i&&void(null!=n?n():window.location.href=t.attr("action"))}}):alert("metro 资源依赖错误！")}}}});