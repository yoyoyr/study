try{window||(window={})}catch(e){window={},exports.console=console}var persistence=window&&window.persistence?window.persistence:{};persistence.store||(persistence.store={}),persistence.store.cordovasql={},persistence.store.cordovasql.config=function(n,e,t,o,i,r,s){var c=null;if(n.transaction=function(n){if(!c)throw new Error("No ongoing database connection, please connect first.");c.transaction(n)},n.db=n.db||{},n.db.implementation="unsupported",n.db.conn=null,window&&"sqlitePlugin"in window?n.db.implementation="sqliteplugin":window&&window.openDatabase&&(n.db.implementation="websql"),n.db.sqliteplugin={},n.db.sqliteplugin.connect=function(e,t,o){var i={},r=window.sqlitePlugin.openDatabase({name:e,bgType:t,location:o||0,androidLockWorkaround:1});return n.db.conn=r,i.transaction=function(e){return r.transaction(function(t){return e(n.db.websql.transaction(t))})},i},n.db.sqliteplugin.transaction=function(e){var t={};return t.executeSql=function(t,o,i,r){n.debug&&console.log(t,o),e.executeSql(t,o,function(n,e){if(i){for(var t=[],o=0;o<e.rows.length;o++)t.push(e.rows.item(o));i(t)}},r)},t},n.db.websql={},n.db.websql.connect=function(e,t,o,i){var r={},s=openDatabase(e,t,o,i);return n.db.conn=s,r.transaction=function(e){return s.transaction(function(t){return e(n.db.websql.transaction(t))})},r},n.db.websql.transaction=function(e){var t={};return t.executeSql=function(t,o,i,r){n.debug&&console.log(t,o),e.executeSql(t,o,function(n,e){if(i){for(var t=[],o=0;o<e.rows.length;o++)t.push(e.rows.item(o));i(t)}},r)},t},n.db.connect=function(e,t,o,i,r,s){return"sqliteplugin"==n.db.implementation?(console.log("persistence.db.implementation:sqliteplugin"),n.db.sqliteplugin.connect(e,r,s)):"websql"==n.db.implementation?(console.log("persistence.db.implementation:websql"),n.db.websql.connect(e,t,o,i)):null},n.store.cordovasql.sqliteDialect={createTable:function(e,t){for(var o=n.typeMapper,i="CREATE TABLE IF NOT EXISTS `"+e+"` (",r=[],s=0;s<t.length;s++){var c=t[s];r.push("`"+c[0]+"` "+o.columnType(c[1])+(c[2]?" "+c[2]:""))}return i+=r.join(", "),i+=")"},createIndex:function(n,e,t){return t=t||{},"CREATE "+(t.unique?"UNIQUE ":"")+"INDEX IF NOT EXISTS `"+n+"__"+e.join("_")+"` ON `"+n+"` ("+e.map(function(n){return"`"+n+"`"}).join(", ")+")"}},n.store.sql.config(n,n.store.cordovasql.sqliteDialect),c=n.db.connect(e,t,o,i,r,s),!c)throw new Error("No supported database found in this browser.")};try{exports.persistence=persistence}catch(e){}